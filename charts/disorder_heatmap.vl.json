{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Mental Disorder Distribution by Age Group",
    "fontSize": 18,
    "font": "Merriweather",
    "anchor": "start"
  },
  "width": 500,
  "height": 350,
  "data": {
    "values": [
      {"age_group": "16-24", "disorder": "Anxiety", "count": 863.6},
      {"age_group": "16-24", "disorder": "Affective", "count": 365.4},
      {"age_group": "16-24", "disorder": "Substance Use", "count": 211.8},
      {"age_group": "25-34", "disorder": "Anxiety", "count": 795.1},
      {"age_group": "25-34", "disorder": "Affective", "count": 352.4},
      {"age_group": "25-34", "disorder": "Substance Use", "count": 148.3},
      {"age_group": "35-44", "disorder": "Anxiety", "count": 552.3},
      {"age_group": "35-44", "disorder": "Affective", "count": 238.3},
      {"age_group": "35-44", "disorder": "Substance Use", "count": 122.9},
      {"age_group": "45-54", "disorder": "Anxiety", "count": 498.5},
      {"age_group": "45-54", "disorder": "Affective", "count": 203.4},
      {"age_group": "45-54", "disorder": "Substance Use", "count": 88.0},
      {"age_group": "55-64", "disorder": "Anxiety", "count": 425.6},
      {"age_group": "55-64", "disorder": "Affective", "count": 200.1},
      {"age_group": "55-64", "disorder": "Substance Use", "count": 40.1},
      {"age_group": "65-74", "disorder": "Anxiety", "count": 214.2},
      {"age_group": "65-74", "disorder": "Affective", "count": 111.3},
      {"age_group": "65-74", "disorder": "Substance Use", "count": 29.1},
      {"age_group": "75-85", "disorder": "Anxiety", "count": 66.0},
      {"age_group": "75-85", "disorder": "Affective", "count": 17.0},
      {"age_group": "75-85", "disorder": "Substance Use", "count": 3.0}
    ]
  },
  "params": [
    {
      "name": "disorder_filter",
      "select": {"type": "point", "fields": ["disorder"]},
      "bind": "legend"
    }
  ],
  "mark": {
    "type": "rect",
    "stroke": "white",
    "strokeWidth": 2
  },
  "encoding": {
    "x": {
      "field": "age_group",
      "type": "nominal",
      "title": "Age Group",
      "axis": {
        "labelAngle": 0,
        "labelFontSize": 12
      }
    },
    "y": {
      "field": "disorder",
      "type": "nominal",
      "title": "Disorder Type",
      "axis": {
        "labelFontSize": 12
      }
    },
    "color": {
      "field": "count",
      "type": "quantitative",
      "scale": {
        "scheme": "orangered",
        "domain": [0, 900]
      },
      "legend": {
        "title": "Affected ('000s)",
        "titleFontSize": 12,
        "labelFontSize": 11
      }
    },
    "opacity": {
      "condition": {"param": "disorder_filter", "value": 1},
      "value": 0.2
    },
    "tooltip": [
      {"field": "age_group", "type": "nominal", "title": "Age Group"},
      {"field": "disorder", "type": "nominal", "title": "Disorder Type"},
      {"field": "count", "type": "quantitative", "title": "Affected ('000s)", "format": ".1f"}
    ]
  }
}
